package com.commUI{	import flash.display.InteractiveObject;	import flash.events.ContextMenuEvent;	import flash.events.EventDispatcher;	import flash.ui.ContextMenu;	import flash.ui.ContextMenuItem;	public class RightMenu extends EventDispatcher	{		private var customCM : ContextMenu;		// the custom menu		private var target : InteractiveObject;		private var selectedMenuItem : String;		public function get selectedMenu() : String		{			return selectedMenuItem;		}		public function get currentMenuItems() : Array		{			return customCM.customItems;		}		public function RightMenu(target : InteractiveObject)		{			this.target = target;			customCM = new ContextMenu();			removeDefaultItems();			target.contextMenu = customCM;		}		private function removeDefaultItems() : void		{			customCM.hideBuiltInItems();		}		private function dispatchMenuEvent(event : ContextMenuEvent) : void		{			selectedMenuItem = event.target["caption"];			dispatchEvent(event);		}		public function addMenuItem(menuLabel : String, separatorBefore : Boolean) : void		{			var newCm : ContextMenuItem = new ContextMenuItem(menuLabel, separatorBefore);			newCm.addEventListener(ContextMenuEvent.MENU_ITEM_SELECT, dispatchMenuEvent);			customCM.customItems.push(newCm);		}		public function removeMenuItem(menuLabel : String) : void		{			var currentMenuItemsArray : Array = customCM.customItems;			for (var i:Object in currentMenuItemsArray)			{				if (currentMenuItemsArray[i]["caption"] == menuLabel)				{					currentMenuItemsArray[i]["removeEventListener"](ContextMenuEvent.MENU_ITEM_SELECT, dispatchMenuEvent);					customCM.customItems.splice(i, 1);					break;				}			}		}		public function hideMenuItem(itemToDisable : String) : void		{			var currentMenuItemsArray : Array = customCM.customItems;			for (var i:Object in currentMenuItemsArray)			{				if (currentMenuItemsArray[i]["caption"] == itemToDisable)				{					customCM.customItems[i]["enabled"] = false;					break;				}			}		}		public function showMenuItem(itemToEnable : String) : void		{			var currentMenuItemsArray : Array = customCM.customItems;			for (var i:Object in currentMenuItemsArray)			{				if (currentMenuItemsArray[i]["caption"] == itemToEnable)				{					customCM.customItems[i]["enabled"] = true;					break;				}			}		}	}}